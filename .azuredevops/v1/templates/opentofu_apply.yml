# Requirements:
# - OpenTofu is installed on pipeline agent
# - opentofu init

parameters:
- name: enabled
  type: boolean
  default: true

- name: continueOnError
  type: boolean
  default: false

steps:
- download: current
  artifact: lakehouse

- script: |
    tofu show 
  displayName: OpenTofu show
  workingDirectory: $(Pipeline.Workspace)/lakehouse/

- script: |
    tofu apply plan.out
  displayName: OpenTofu show
  workingDirectory: $(Pipeline.Workspace)/lakehouse/
