# Requirements:
# - OpenTofu is installed on pipeline agent
# - opentofu init

parameters:
- name: enabled
  type: boolean
  default: true

- name: continueOnError
  type: boolean
  default: false

- name: openTofuDir
  type: string

steps:
- script: |
    tofu plan -out=${{ parameters.openTofuDir }}/plan.out
  displayName: OpenTofu plan
  workingDirectory: ${{ parameters.openTofuDir }}

- publish: ${{ parameters.openTofuDir }}
  artifact: lakehouse
